---
published: true
layout: post
tags: ["web", "development", "static", "jamstack"]
title: Keeping a JAMStack site feeling fresh with recent tweets
description: Rather than using Javascript in the browser to show recent tweets, I'd rather remove that dependency and bake the tweets into the HTML. A few simple tools can automate that and keep a site fresh.
---

<div class="grab">
  <p>
    Having somewhere on your site to show a few of your recent tweets is a common requirement. Twitter provides some easy ways to embed tweets or twitter feeds onto your site via Javascript, but I'm keen to remove external javascript dependencies from my site. It helps the site to render more quickly, and lets me control exactly how it looks.
  </p>
  <p>
    But for a static site, it would be a pain to need to compile and deploy after every tweet. Luckily, by stitching together some simple tools, this can all happen automagically whenever a new tweet is posted.
  </p>
  <figure>
    <img src="/images/ifttt-maker-webhooks.png" alt="IFTTT Maker Webhooks">
  </figure>
</div>

<!-- more -->
<p>
  My site, this site, is made with Jekyll. Perhaps the most popular static site generator. I already have a few bits of Gulp as part of my build automation and the whole thing is hosted on <a href="https://www.netlify.com" target="_BLANK" rel="noopener">Netlify</a>, my very favorite static site hosting service.
</p>

<h2>Pulling tweets into the codebase</h2>
<p>
To bring recent tweets into the site, I add a <a href="https://github.com/philhawksworth/hawksworx.com/blob/f5ece4ed3d06a3caae75978155e7f091c965cfaa/gulpfile.js#L168-L206" target="_BLANK" rel="noopener">gulp task which requests my recent tweets</a> from Twitter's API, and stashes them in a YAML Data file. <a href="https://jekyllrb.com/docs/datafiles/" target="_BLANK" rel="noopener">Jekyll makes YAML Data files available</a> to its templates so I can use the content however I need.
</p>
<p>
So far, so simple. Now to trigger a build and deplyment whenever I tweet.
</p>
<p>
Netlify can run your build for you in their environment in exactly the same way that as it runs in your local development environment. The output then gets deployed to their distributed CDN.
</p>
<h2>Triggering the build</h2>
<p>
There are lots of ways to trigger a Netlify build, but what we need here is webhook. In <a href="https://www.netlify.com/docs/webhooks/#incoming-webhooks" target="_BLANK" rel="noopener">Netlify's site settings</a>, we create a webhook and now we have a URL which will trigger a build and deployment whenever it recieves a POST request.
</p>
<p>
Now to monitor a Twitter feed. I'm trying to keep away from the need to host any server or service myself, so I just turn to <a href="https://ifttt.com" target="_BLANK" rel="noopener">If This Then That</a>, the service automation... um... service.
</p>
<p>
IFTTT has channels to <a href="https://ifttt.com/twitter" target="_BLANK" rel="noopener">monitor twitter feeds</a>, and also has the ability to <a href="https://ifttt.com/maker_webhooks" target="_BLANK" rel="noopener">make requests to Webhooks</a>, so all that is required it to configure an IFTTT Applet to tie these things together.
</p>
<img src="/images/ifttt-build-hawksworx.png" alt="IFTTT applet monitors tweets and builds hawksworx.com">

<h2>Pulling it all together</h2>
<p>
  With these pieces in place, things start working nicely. Each tweet will find its way to the site's HTML with no need for client-side javascript. A quick summary:
</p>
<ol>
  <li>IFTTT monitors activity from my twiiter feed</li>
  <li>New tweets result in a call to a webhook</li>
  <li>POST requests to the specified webhook invoke a new build on Netlify</li>
  <li>The site build pulls in recent tweets from the Twitter API and <a href="#footer">includes them in the site</a></li>
  <li>Victory dance</li>
</ol>
